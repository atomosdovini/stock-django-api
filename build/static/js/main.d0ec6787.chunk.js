(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{315:function(e,t,n){},317:function(e,t,n){},330:function(e,t,n){},331:function(e,t,n){},400:function(e,t,n){},407:function(e,t,n){},408:function(e,t,n){},409:function(e,t,n){},410:function(e,t,n){},412:function(e,t,n){},413:function(e,t,n){},414:function(e,t,n){},415:function(e,t,n){},416:function(e,t,n){},417:function(e,t,n){},418:function(e,t,n){},419:function(e,t,n){},420:function(e,t,n){},421:function(e,t,n){},422:function(e,t,n){},423:function(e,t,n){},428:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(29),i=n.n(c),o=n(3),s=n(49),l=n(56),u=n(60),d=n(2),j=n(5),b=n(20),p=n(13),h=n.n(p),f=n(76),m=n.n(f),x="LOGIN_SUCCESS",g="LOGIN_FAIL",O="SIGNUP_SUCCESS",v="SIGNUP_FAIL",y="ACTIVATION_SUCCESS",k="ACTIVATION_FAIL",w="USER_LOADED_SUCCESS",S="USER_LOADED_FAIL",C="AUTHENTICATED_SUCCESS",N="AUTHENTICATED_FAIL",T="PASSWORD_RESET_FAIL",P="PASSWORD_RESET_SUCCESS",I="PASSWORD_RESET_CONFIRM_FAIL",R="PASSWORD_RESET_CONFIRM_SUCCESS",A="LOGOUT";function _(){if(localStorage.getItem("access"))return!0!==JSON.stringify({token:localStorage.getItem("access")})}var E=function(){return function(){var e=Object(b.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=14;break}return n={headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}},e.prev=2,e.next=5,m.a.get("".concat("https://consense-djangoapi.herokuapp.com","/auth/users/me/"),n);case 5:a=e.sent,t({type:w,payload:a.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t({type:S});case 12:e.next=15;break;case 14:t({type:S});case 15:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},F=n(467),z=n(475),D=n(469),L=n(464),M=(n(315),n(4)),B=function(e){var t=e.styles;e.color;return Object(M.jsx)("button",{className:"filed"===t?"button button-filed":"outlined"===t?"button button-outlined":void 0,children:e.children})},W=function(e){var t=e.styles;e.color;return Object(M.jsx)("div",{className:"container"===t?"simple-container":"big-container"===t?"container-wrapper":void 0,children:e.children})},U=(n(317),function(e){var t=e.styles;e.color;return Object(M.jsxs)("div",{className:"logo"===t?"logo-auth":"logo-menu"===t?"logo-menu":void 0,children:[e.children,Object(M.jsx)("img",{width:"100%",src:"https://nodaudigital.com.br/wp-content/uploads/2021/08/logo.png"})]})});m.a.defaults.headers.common.Authorization=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://consense-djangoapi.herokuapp.com"}).AUTHORIZATION_API_TOKEN,m.a.defaults.xsrfCookieName="csrftoken",m.a.defaults.xsrfHeaderName="X-CSRFToken";var V=m.a.create({baseURL:"https://consense-djangoapi.herokuapp.com",headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json"}});new AbortController;function H(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var r=n[a].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}var q,Y,Q,K,J,G=function(){var e=H("csrftoken");return Object(M.jsx)("input",{type:"hidden",name:"csrfmiddlewaretoken",value:e})},X=Object(L.a)({root:{},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:0}}),Z=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(){var n=Object(b.a)(h.a.mark((function n(a){var r,c,i;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={headers:{"Content-Type":"application/json",Accept:"application/json"}},c=JSON.stringify({email:e,password:t}),n.prev=2,n.next=5,m.a.post("".concat("https://consense-djangoapi.herokuapp.com","/auth/jwt/create/"),c,r);case 5:i=n.sent,a({type:x,payload:i.data}),localStorage.setItem("access",i.data.access),localStorage.setItem("refresh",i.data.refresh),a(E()),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(2),a({type:g});case 15:case"end":return n.stop()}}),n,null,[[2,12]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.login,n=e.isAuthenticated,r=Object(a.useState)({email:"",password:""}),c=Object(j.a)(r,2),i=c[0],u=c[1],b=(X(),i.email),p=i.password,h=function(e){return u(Object(o.a)(Object(o.a)({},i),{},Object(d.a)({},e.target.name,e.target.value)))};return n?Object(M.jsx)(l.a,{to:"/recommendations"}):Object(M.jsx)("div",{children:Object(M.jsx)("div",{style:{minWidth:290,paddingTop:"5%",maxWidth:"230px",marginRight:"auto",marginLeft:"auto",minHeight:"400px"},className:"container",children:Object(M.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),t(b,p)}(e)},children:[Object(M.jsx)(F.a,{variant:"outlined",children:Object(M.jsxs)(W,{styles:"big-container",children:[Object(M.jsx)(U,{styles:"logo"}),Object(M.jsx)("p",{style:{textAlign:"center",marginBottom:"35px"},color:"secondary",children:"Insira suas credenciais para entrar"}),Object(M.jsx)("div",{className:"form-group",children:Object(M.jsx)(z.a,{id:"outlined-basic",variant:"outlined",label:"Email",className:"form-control",type:"email",placeholder:"Email",name:"email",value:b,size:"small",onChange:function(e){return h(e)},required:!0})}),Object(M.jsx)("div",{className:"form-group",children:Object(M.jsx)(z.a,{id:"outlined-basic",variant:"outlined",label:"Senha",className:"form-control",type:"password",placeholder:"Senha",name:"password",value:p,size:"small",onChange:function(e){return h(e)},minLength:"6",required:!0})}),Object(M.jsxs)("div",{className:"wrapper",children:[Object(M.jsx)(D.a,{className:"card-action",children:Object(M.jsx)(B,{styles:"primary",type:"submit",children:"Entrar"})}),Object(M.jsx)(W,{className:"wrapper-reset",children:Object(M.jsx)(s.b,{to:"/reset-password",children:"Esqueceu sua senha?"})})]})]})}),Object(M.jsx)(G,{})]})})})})),$=n(51),ee=n(52),te=ee.a.div(q||(q=Object($.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n"]))),ne=(ee.a.div(Y||(Y=Object($.a)([" \n  background: var(--light-primary-color);\n  width: 40px; \n  height: 40px;\n  margin-right: 8px;\n  border-radius: 50%;\n"]))),ee.a.div(Q||(Q=Object($.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: center;\n"])))),ae=n(470),re=n(268),ce=n(482),ie=(n(218),n(330),Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{logout:function(){return function(e){e({type:A})}}})((function(e){var t=e.logout,n=e.isAuthenticated,c=Object(a.useState)(!1),i=Object(j.a)(c,2),o=i[0],s=i[1],u=function(){t(),s(!0)},d=r.a.useState(null),b=Object(j.a)(d,2),p=b[0],h=b[1],f=function(){h(null)};return Object(M.jsxs)(a.Fragment,{children:[Object(M.jsx)("div",{children:Object(M.jsxs)("div",{style:{width:10},children:[Object(M.jsx)(ae.a,{variant:"contained",onClick:function(e){h(e.currentTarget)},style:{height:15,marginLeft:-15}}),Object(M.jsx)(re.a,{id:"simple-menu",anchorEl:p,keepMounted:!0,open:Boolean(p),onClose:f,children:n?Object(M.jsx)("li",{className:"nav-item",children:Object(M.jsx)(ce.a,{onClick:u,children:"Sair"})}):Object(M.jsx)(a.Fragment,{children:Object(M.jsx)("li",{className:"nav-item",children:Object(M.jsx)(ce.a,{onClick:u,children:"Sair"})})})})]})}),o?Object(M.jsx)(l.a,{to:"/"}):Object(M.jsx)(a.Fragment,{})]})}))),oe=(new Date).getHours(),se=5<oe&&oe<=12?"Bom dia":12<oe&&oe<=18?"Boa tarde":"Boa noite";function le(){Object(u.c)((function(e){return e.auth.user}));return Object(M.jsx)(te,{children:Object(M.jsxs)(ne,{children:[Object(M.jsx)("div",{style:{fontSize:16,fontWeight:"bold",color:"white",marginLeft:-20},children:se}),Object(M.jsx)(ie,{})]})})}var ue=ee.a.header(K||(K=Object($.a)(["\n  z-index: 10;\n  width: 100%;\n\n"]))),de=ee.a.div(J||(J=Object($.a)(["\n  width: 100%;\n  max-width: 100%;\n  margin: 0 auto;\n  background: #6D3B9E!important;\n  box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n\n\n  padding: 1rem 2rem;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;  \n\n  button {\n    font-size: 1rem;\n    color: #fff;\n    background: var(--blue-light);\n    border: 0;\n    padding: 0 2rem;\n    border-radius: 0.25rem;\n    height: 3rem;\n\n    transition: filter 0.2s;\n\n    &:hover {\n      filter: brightness(0.9)\n    };\n  }\n"])));function je(){return Object(M.jsx)(ue,{children:Object(M.jsx)(de,{children:Object(M.jsx)(le,{})})})}n(331);var be=n(471),pe=n(116),he=n.p+"static/media/rendavariavel-icon.8d78531e.svg",fe=n.p+"static/media/acoes-icon.92cc646e.svg",me=n.p+"static/media/settings-icon.6ee1f4e6.svg",xe=(n.p,be.a.Sider);function ge(e){var t=e.selectedKey;return Object(M.jsx)(xe,{className:"sidebar-menu",breakpoint:"lg",collapsedWidth:"0",children:Object(M.jsxs)(pe.a,{style:{background:"var(--light-primary-color)"},theme:"dark",mode:"inline",defaultSelectedKeys:[t],children:[Object(M.jsx)(pe.a.Item,{children:Object(M.jsxs)(s.b,{to:"/recommendations",children:[Object(M.jsx)("img",{src:he,style:{marginRight:8}}),"Rec. Renda Vari\xe1vel"]})},"1"),Object(M.jsx)(pe.a.Item,{children:Object(M.jsxs)(s.b,{to:"/stocks",children:[Object(M.jsx)("img",{src:fe,style:{marginRight:8}})," A\xe7\xf5es"]})},"2"),Object(M.jsx)(pe.a.Item,{children:Object(M.jsxs)(s.b,{to:"/import-export-files",children:[Object(M.jsx)("img",{src:me,style:{marginRight:8}})," Importar/exportar"]})},"3")]})})}var Oe,ve=n(270),ye=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{signup:function(e,t,n,a,r){return function(){var c=Object(b.a)(h.a.mark((function c(i){var o,s,l;return h.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return o={headers:{"Content-Type":"application/json"}},s=JSON.stringify({first_name:e,last_name:t,email:n,password:a,re_password:r}),c.prev=2,c.next=5,m.a.post("".concat("https://consense-djangoapi.herokuapp.com","/auth/users/"),s,o);case 5:l=c.sent,i({type:O,payload:l.data}),c.next=12;break;case 9:c.prev=9,c.t0=c.catch(2),i({type:v});case 12:case"end":return c.stop()}}),c,null,[[2,9]])})));return function(e){return c.apply(this,arguments)}}()}})((function(e){var t=e.signup,n=Object(a.useState)(!1),r=Object(j.a)(n,2),c=r[0],i=r[1],u=Object(a.useState)({first_name:"",last_name:"",email:"",password:"",re_password:""}),b=Object(j.a)(u,2),p=b[0],h=b[1],f=p.first_name,m=p.last_name,x=p.email,g=p.password,O=p.re_password,v=function(e){return h(Object(o.a)(Object(o.a)({},p),{},Object(d.a)({},e.target.name,e.target.value)))};return c?(ve.b.success("Conta criada com Sucesso, verifique seu e-mail!"),Object(M.jsx)(l.a,{to:"/recommendations"})):Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(je,{}),Object(M.jsxs)(be.a,{style:{width:"100%",maxWidth:"100%"},children:[Object(M.jsx)(ge,{selectedKey:"4"}),Object(M.jsx)(be.a,{style:{background:"#ffffff"},children:Object(M.jsxs)("div",{style:{minWidth:290,paddingTop:"1%",maxWidth:"230px",marginRight:"auto",marginLeft:"auto",minHeight:"400px"},className:"container",children:[Object(M.jsx)(F.a,{variant:"outlined",children:Object(M.jsxs)(W,{styles:"big-container",children:[Object(M.jsx)("p",{style:{textAlign:"center",marginBottom:"35px",margin:"35px"},children:"Cadastre um usu\xe1rio para o sistema"}),Object(M.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),g===O&&(t(f,m,x,g,O),i(!0))}(e)},children:[Object(M.jsx)("div",{className:"form-group",children:Object(M.jsx)(z.a,{id:"outlined-basic",variant:"outlined",label:"Nome",size:"small",className:"form-control",type:"text",placeholder:"First Name*",name:"first_name",value:f,onChange:function(e){return v(e)},required:!0})}),Object(M.jsx)("div",{className:"form-group",children:Object(M.jsx)(z.a,{id:"outlined-basic",variant:"outlined",label:"Sobrenome",size:"small",className:"form-control",type:"text",placeholder:"Last Name*",name:"last_name",value:m,onChange:function(e){return v(e)},required:!0})}),Object(M.jsx)("div",{className:"form-group",children:Object(M.jsx)(z.a,{id:"outlined-basic",variant:"outlined",label:"E-mail",size:"small",className:"form-control",type:"email",placeholder:"Email*",name:"email",value:x,onChange:function(e){return v(e)},required:!0})}),Object(M.jsx)("div",{className:"form-group",children:Object(M.jsx)(z.a,{id:"outlined-basic",variant:"outlined",label:"Senha",size:"small",className:"form-control",type:"password",placeholder:"Password*",name:"password",value:g,onChange:function(e){return v(e)},minLength:"6",required:!0})}),Object(M.jsx)("div",{className:"form-group",children:Object(M.jsx)(z.a,{id:"outlined-basic",variant:"outlined",label:"Confirme sua senha",size:"small",className:"form-control",type:"password",placeholder:"Confirm Password*",name:"re_password",value:O,onChange:function(e){return v(e)},minLength:"6",required:!0})}),Object(M.jsx)(D.a,{className:"card-action",children:Object(M.jsx)(B,{styles:"filed",type:"submit",children:"Cadastrar usu\xe1rio"})})]})]})}),Object(M.jsx)(F.a,{style:{marginTop:20,textAlign:"center",boxShadow:"unset"},children:Object(M.jsx)(s.b,{to:"/recommendations",children:" Cancelar/Voltar"})})]})})]})]})})),ke=n(7),we=n(8),Se=n(35),Ce=n(50);function Ne(e,t){return Te.apply(this,arguments)}function Te(){return(Te=Object(b.a)(h.a.mark((function e(t,n){var a,r,c,i,o,s,l,u,d;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.get("/recommendation/",{params:{page:t,research:n.research,rating:n.rating,sector:n.sector,date_i:n.date_i,date_f:n.date_f}});case 2:a=e.sent,r=a.data,c=r.total_pages,i=r.count,Oe=r.results.reduce((function(e,t){var n=e.map((function(e){return e.stockTicket})).indexOf(t.stockticket);if(-1===n)o={key:t.id,stockName:t.stockname,stockTicket:t.stockticket,sectorName:t.sectorname,averageTargetPrice:t.target,averagePotential:Number(100*(t.target/t.initial_price-1)),research:[{key:t.id,stockTicket:t.stockticket,researchName:t.researchname,researchId:t.research,rating:t.rating,initialPrice:t.initial_price,dateFinal:t.datefinal.split("-").reverse().join("/"),targetPrice:t.target,potential:Number((100*(t.target/t.initial_price-1)).toFixed(2))}]},e.push(o);else{var a={key:t.id,stockTicket:t.stockticket,researchName:t.researchname,researchId:t.research,rating:t.rating,initialPrice:t.initial_price,dateFinal:t.datefinal.split("-").reverse().join("/"),targetPrice:t.target,potential:Number((100*(t.target/t.initial_price-1)).toFixed(2))};e[n].research.push(a),e[n].averageTargetPrice+=t.target,e[n].averagePotential=Number((e[n].averagePotential+a.potential).toFixed(2))}return e}),[]),s=[],l=Object(Se.a)(r.results);try{for(l.s();!(u=l.n()).done;)d=u.value,s.includes(d.stockticket)||s.push(d.stockticket)}catch(j){l.e(j)}finally{l.f()}return e.abrupt("return",{totalPages:c,totalOfRecomendations:i,ticketList:s,recommendationsListData:Oe});case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(b.a)(h.a.mark((function e(t){var n,a,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.get("/recommendation/?ticket=".concat(t),{timeout:2e5});case 2:return n=e.sent,a=n.data,c=a.results.reduce((function(e,t){var n=e.map((function(e){return e.stockTicket})).indexOf(t.stockticket);if(-1===n)r={key:t.id,stockName:t.stockname,stockTicket:t.stockticket,sectorName:t.sectorname,averageTargetPrice:t.target,averagePotential:Number(100*(t.target/t.initial_price-1)),research:[{key:t.id,stockTicket:t.stockticket,researchName:t.researchname,researchId:t.research,rating:t.rating,initialPrice:t.initial_price,dateFinal:t.datefinal.split("-").reverse().join("/"),targetPrice:t.target,potential:Number((100*(t.target/t.initial_price-1)).toFixed(2))}]},e.push(r);else{var a={key:t.id,stockTicket:t.stockticket,researchName:t.researchname,researchId:t.research,rating:t.rating,initialPrice:t.initial_price,dateFinal:t.datefinal.split("-").reverse().join("/"),targetPrice:t.target,potential:Number((100*(t.target/t.initial_price-1)).toFixed(2))};e[n].research.push(a),e[n].averageTargetPrice+=t.target,e[n].averagePotential=Number((e[n].averagePotential+a.potential).toFixed(2))}return e}),[]),e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(){return(Re=Object(b.a)(h.a.mark((function e(t){var n,a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.get("/stocks/?ticket=".concat(t),{timeout:2e5});case 2:return n=e.sent,a=n.data,r={stockName:a.name,stockTicket:a.ticket,sectorName:a.sectorname,actualPrice:0===a.actual_price?"sem dados":a.actual_price,oneYear:0==Number(a.growth1y)?"sem dados":a.growth1y,sixMouths:0==Number(a.growth6m)?"sem dados":a.growth6m,oneMouth:0==Number(a.growth30d)?"sem dados":a.growth30d},e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e){return Object(Ce.useQueries)(e.map((function(t){return{queryKey:["ticket",t],queryFn:function(){return function(e){return Re.apply(this,arguments)}(t)},enabled:!!e,staleTime:864e5,cacheTime:864e5,refetchOnWindowFocus:!1,refetchOnMount:!1}})))}var _e=new Ce.QueryClient,Ee=Object(a.createContext)();function Fe(e){var t=e.children,n=Object(a.useState)([]),r=Object(j.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)([]),s=Object(j.a)(o,2),l=s[0],u=s[1],d=Object(a.useState)([]),p=Object(j.a)(d,2),f=p[0],m=p[1],x=Object(a.useState)([]),g=Object(j.a)(x,2),O=g[0],v=g[1],y=Object(a.useState)(""),k=Object(j.a)(y,2),w=k[0],S=k[1],C=Object(a.useState)(""),N=Object(j.a)(C,2),T=N[0],P=N[1],I=Object(a.useState)(1),R=Object(j.a)(I,2),A=R[0],E=R[1],F=Object(a.useState)({}),z=Object(j.a)(F,2),D=z[0],L=z[1],B=Object(a.useState)(!1),W=Object(j.a)(B,2),U=W[0],V=W[1];Object(a.useEffect)((function(){var e=c.map((function(e){return e.id}));L({research:O,rating:f,sector:e,date_i:w,date_f:T}),E(1)}),[O,f,c,w,T]);var H=function(e,t){return Object(Ce.useQuery)(["recommendationsList",e,t],Object(b.a)(h.a.mark((function n(){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",Ne(e,t));case 1:case"end":return n.stop()}}),n)}))),{enabled:!!_(),staleTime:864e5,cacheTime:864e5,refetchOnWindowFocus:!1,refetchOnMount:!1})}(A,D),q=H.data,Y=H.isLoading,Q=H.isError,K=null===q||void 0===q?void 0:q.ticketList,J=null===q||void 0===q?void 0:q.totalPages,G=null===q||void 0===q?void 0:q.totalOfRecomendations,X=null===q||void 0===q?void 0:q.recommendationsListData,Z=Ae(K||[]);function $(){return($=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e.prefetchQuery(["recommendations for",t],Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{staleTime:864e5,cacheTime:864e5,refetchOnWindowFocus:!1,refetchOnMount:!1});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e.refetchQueries({active:!0});case 2:V(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(M.jsx)(Ee.Provider,{value:{ticketData:Z,handlePrefetchRecommendations:function(e){return $.apply(this,arguments)},handleRefetchRecommendations:function(){return ee.apply(this,arguments)},recommendationsTableData:X,rating:f,setRating:m,research:O,setResearch:v,currentPage:A,handleChangePage:function(e){E(e)},totalResearchTablePages:J,totalRecomendations:G,onDateSelection:function(e,t){var n=t[0].split("/").reverse().join("-"),a=t[1].split("/").reverse().join("-");S(n),P(a)},sector:c,setSector:i,stocks:l,setStocks:u,params:D,isLoading:Y,isError:Q,isRefeching:U,setIsRefeching:V},children:t})}function ze(){return Object(a.useContext)(Ee)}var De,Le,Me,Be,We=new Intl.NumberFormat("pt-br",{style:"currency",currency:"BRL"}).format,Ue=n(479),Ve=n(480),He=n(269),qe=n(477),Ye=n(261),Qe=n(481),Ke=n(472),Je=n(74),Ge=n(483),Xe=(n(400),ee.a.p(De||(De=Object($.a)(["\n  color: #FFFFFF;\n  padding: 4px;\n  margin: 0 !important;\n"]))),ee.a.p(Le||(Le=Object($.a)(["\n  color: var(--light-primary-color);\n  padding: 4px;\n  margin: 0 !important;\n"]))),ee.a.span(Me||(Me=Object($.a)(["\n  font-size: 12px;\n  background:  ",";  \n  color: #ffffff;\n  padding: 6px;\n  cursor: ",";\n"])),(function(e){return e.disabled?"#909090":"var(--light-primary-color)"}),(function(e){return e.disabled?"not-allowed":"pointer"}))),Ze=ee.a.p(Be||(Be=Object($.a)(["\n  text-transform: lowercase;\n  &::first-letter {\n    text-transform: capitalize\n  }\n  margin-bottom: 0px\n"]))),$e=n(75);function et(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),n=t[0],r=t[1];function c(){return(c=Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.next=3,_e.refetchQueries({stale:!0});case 3:r(!1);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(M.jsx)($e.a,{icon:Object(M.jsx)(Ge.a,{spin:n}),type:"primary",onClick:function(){return function(){return c.apply(this,arguments)}()},children:"Tentar novamente"})}var tt=["editing","dataIndex","title","inputType","record","index","children"];function nt(){var e=ze(),t=e.ticketData,n=e.handlePrefetchRecommendations,r=e.handleRefetchRecommendations,c=e.recommendationsTableData,i=e.currentPage,l=e.handleChangePage,u=e.totalResearchTablePages,d=e.totalRecomendations,p=e.params,f=e.isLoading,m=e.isError,x=e.isRefeching,g=e.setIsRefeching,O=Object(a.useState)([]),v=Object(j.a)(O,2),y=v[0],k=v[1],w=Ue.a.useForm(),S=Object(j.a)(w,1)[0],C=Object(a.useState)(""),N=Object(j.a)(C,2),T=N[0],P=N[1],I=d/u,R=Object(M.jsx)(Ye.a,{style:{color:"var(--light-primary-color)"}}),A=Object(Ce.useMutation)(function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.put("recommendation/".concat(t.recom.key,"/"),t.updatedRecommendation);case 2:return e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(e){return _e.invalidateQueries(["recommendationsList",i,p])}}),_=function(){var e=Object(b.a)(h.a.mark((function e(t,n){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("COMPRA"!==(a=t.rating.toUpperCase())&&"VENDA"!==a&&"NEUTRO"!==a){e.next=8;break}return k(n),r={datefinal:t.dateFinal.split("/").reverse().join("-"),rating:a,target:t.targetPrice},e.next=6,A.mutateAsync({updatedRecommendation:r,recom:t});case 6:e.next=9;break;case 8:ve.b.error("Os valores de rating s\xe3o: Compra, Venda ou Neutro");case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=void 0===c?null:c.map((function(e){return t.every((function(e){return e.isSuccess}))?t.reduce((function(t,n){var a;return(null===(a=n.data)||void 0===a?void 0:a.stockTicket)===e.stockTicket?t={key:e.key,stockTicket:n.data.stockTicket,stockName:n.data.stockName,actualPrice:n.data.actualPrice,averageTargetPrice:Number((e.averageTargetPrice/e.research.length).toFixed(2)),averagePotential:(e.averagePotential/e.research.length).toFixed(2),research:e.research}:t}),{}):{key:e.key,stockTicket:e.stockTicket,stockName:e.stockName,actualPrice:e.actualPrice,averageTargetPrice:Number((e.averageTargetPrice/e.research.length).toFixed(2)),averagePotential:(e.averagePotential/e.research.length).toFixed(2),research:e.research}}));Object(a.useEffect)((function(){var e=void 0===c?null:c.map((function(e){return e.research.map((function(e){return{key:e.key,stockTicket:e.stockTicket,dateFinal:e.dateFinal,researchName:e.researchName,researchId:e.researchId,rating:e.rating,initialPrice:e.initialPrice,targetPrice:e.targetPrice,potential:e.potential}}))})),t=[];if(null!==e&&void 0!==e&&e.every((function(e){return Array.isArray(e)})))for(var n=0;n<e.length;n++)for(var a=0;a<e[n].length;a++){var r=e[n][a];t.push(r)}k(t)}),[c]);var F=[{title:Object(M.jsxs)(Qe.b,{size:"middle",align:"center",style:{display:"flex",justifyContent:"flex-end",width:200},children:[Object(M.jsx)(Ge.a,{style:{fontSize:16},spin:x,onClick:function(){g(!0),r()}}),Object(M.jsxs)(Qe.b,{size:0,direction:"vertical",align:"center",style:{marginRight:74},children:[Object(M.jsx)("p",{style:{marginBottom:0},children:"Empresa"}),Object(M.jsx)("b",{children:"Ticket"})]})]}),dataIndex:"ticket",align:"center",width:"20%",render:function(e,t){return Object(M.jsxs)(Qe.b,{size:0,direction:"vertical",align:"center",children:[Object(M.jsx)("p",{style:{marginBottom:0},children:t.stockName}),Object(M.jsx)("b",{children:t.stockTicket})]})}},{title:"Cota\xe7\xe3o",dataIndex:"actualPrice",align:"center",render:function(e,t){return void 0===t.actualPrice?R:"string"==typeof t.actualPrice?t.actualPrice:We(t.actualPrice)}},{title:Object(M.jsxs)(Qe.b,{size:0,direction:"vertical",align:"center",children:[Object(M.jsx)("p",{style:{marginBottom:0},children:"M\xe9dia"}),Object(M.jsx)("b",{children:"Pre\xe7o Alvo"})]}),dataIndex:"averageTargetPrice",align:"center",render:function(e,t){return t.averageTargetPrice?We(t.averageTargetPrice):""}},{title:Object(M.jsxs)(Qe.b,{size:0,direction:"vertical",align:"center",children:[Object(M.jsx)("p",{style:{marginBottom:0},children:"M\xe9dia"}),Object(M.jsx)("b",{children:"Potencial"})]}),dataIndex:"averagePotential",align:"center",render:function(e,t){return void 0===t.averagePotential?"":t.averagePotential+"%"}},{title:"",dataIndex:"",key:"x",align:"center",render:function(e,t){var a=!t.actualPrice;return Object(M.jsx)(s.b,{to:t.actualPrice?"/stocks/".concat(t.stockTicket):"#",onMouseEnter:function(){return n(t.stockTicket)},children:Object(M.jsx)(Xe,{disabled:a,children:"Ver detalhes"})})}}],z=function(e){var t=e.editing,n=e.dataIndex,a=(e.title,e.inputType),r=(e.record,e.index,e.children),c=Object(we.a)(e,tt),i="number"===a?Object(M.jsx)(Ve.a,{}):Object(M.jsx)(He.a,{});return Object(M.jsx)("td",Object(o.a)(Object(o.a)({},c),{},{children:t?Object(M.jsx)(Ue.a.Item,{name:n,style:{margin:0},rules:[{required:!0}],children:i}):r}))};return m?Object(M.jsxs)(Qe.b,{direction:"vertical",style:{marginTop:60,marginLeft:380},children:[Object(M.jsx)("p",{children:"Falha ao carregar os dados"}),Object(M.jsx)(et,{})]}):Object(M.jsx)(Ke.a,{loading:f,style:{marginLeft:32},columns:F,expandable:{expandedRowRender:function(e){var t=y.reduce((function(t,n){return n.stockTicket===e.stockTicket?(t.push(n),t):t}),[]),n=function(e){return e.key===T},a=function(){var e=Object(b.a)(h.a.mark((function e(t){var n,a,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.validateFields();case 3:n=e.sent,a=Object(ke.a)(y),r=a.findIndex((function(e){return t===e.key})),r>-1?(c=a[r],a.splice(r,1,Object(o.a)(Object(o.a)({},c),n)),_(Object(o.a)(Object(o.a)({},c),n),a),P("")):(a.push(n),k(a),P("")),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),r=[{title:"Data",dataIndex:"dateFinal",width:"10%",align:"center",editable:!0},{title:"Research",dataIndex:"researchName",width:"6%",align:"center",editable:!1},{title:"Rating",dataIndex:"rating",width:"10%",align:"center",editable:!0,render:function(e,t){return Object(M.jsx)(Ze,{children:t.rating})}},{title:"Cota\xe7\xe3o",dataIndex:"initialPrice",width:"10%",align:"center",editable:!1,render:function(e,t){return void 0===t.initialPrice?"":"sem dados"===t.initialPrice?"sem dados":We(t.initialPrice)}},{title:"Pre\xe7o Alvo",dataIndex:"targetPrice",width:"10%",align:"center",editable:!0,render:function(e,t){return void 0===t.targetPrice?"":"sem dados"===t.targetPrice?"sem dados":We(t.targetPrice)}},{title:"Potencial",dataIndex:"potential",width:"10%",align:"center",editable:!1,render:function(e,t){return void 0===t.potential?"":"sem dados"===t.potential?"sem dados":t.potential+"%"}},{title:"",dataIndex:"operation",align:"center",width:"12%",render:function(e,t){return n(t)?Object(M.jsxs)("span",{children:[Object(M.jsx)("button",{onClick:function(){return a(t.key)},style:{cursor:"pointer",background:"#1890ff",border:"none",color:"#ffffff",borderRadius:2,marginBottom:5},children:"Salvar"}),Object(M.jsx)("button",{onClick:function(){P("")},style:{border:"none",cursor:"pointer",borderRadius:2,color:"#ffffff",background:"#F56565"},children:"Cancelar"})]}):Object(M.jsx)(qe.a.Link,{disabled:""!==T,onClick:function(){return function(e){S.setFieldsValue(Object(o.a)({dateFinal:"",rating:"",targetPrice:""},e)),P(e.key)}(t)},children:"Editar"})}}].map((function(e){return e.editable?Object(o.a)(Object(o.a)({},e),{},{onCell:function(t){return{record:t,inputType:"rating"===e.dataIndex||"dateFinal"===e.dataIndex?"text":"number",dataIndex:e.dataIndex,title:e.title,editing:n(t)}}}):e}));return Object(M.jsx)(Ue.a,{form:S,component:!1,children:Object(M.jsx)(Ke.a,{components:{body:{cell:z}},bordered:!0,dataSource:t,columns:r,rowClassName:"editable-row",pagination:{hideOnSinglePage:!0}})})}},dataSource:E,pagination:{current:i,onChange:l,showSizeChanger:!1,pageSize:I,total:d}})}Ye.a.setDefaultIndicator(Object(M.jsx)(Je.a,{style:{fontSize:24},spin:!0}));var at,rt,ct,it,ot=n(476),st=ee.a.div(at||(at=Object($.a)(["\n  margin-right: 32px;\n  overflow-y: auto;\n"]))),lt=ee.a.div(rt||(rt=Object($.a)(["\n  max-width: 156px;\n  height: auto;\n  padding: 10px;\n  background: var(--light-primary-color);\n  color: #ffffff;\n  text-align: center;\n  font-size: 16px;\n  font-weight: 400;\n"]))),ut=ee.a.p(ct||(ct=Object($.a)(["\n  color: #A8A8A8;\n  font-size: 12px;\n  margin-bottom: 4px;\n\n"]))),dt=ee.a.p(it||(it=Object($.a)(["\n  font-size: 18px;\n  color: #498ACA;\n  margin-bottom: 8px;\n\n\n"])));function jt(){var e,t=ze(),n=t.recommendationsTableData,r=t.isError,c=t.isLoading,i=Object(a.useState)([]),o=Object(j.a)(i,2),s=o[0],l=o[1];return Object(a.useEffect)((function(){if(n){var t=n.reduce((function(t,n){return e={stockticket:n.stockTicket,compra:0,venda:0,neutro:0,revisao:0},n.research.map((function(t){switch(t.rating.toUpperCase()){case"COMPRA":e.compra++;break;case"VENDA":e.venda++;break;case"NEUTRO":e.neutro++;break;case"REVISAO":e.revisao++}})),t.push(e),t}),[]);t.sort((function(e,t){return t.compra-e.compra})),l(t)}}),[n]),Object(M.jsxs)(st,{children:[Object(M.jsx)(lt,{children:"Contagem de Rating"}),c&&!r?Object(M.jsx)(Qe.b,{size:"large",style:{width:"100%"},direction:"vertical",align:"center",children:Object(M.jsx)(Ye.a,{style:{width:"100%",marginTop:"24px",marginBottom:"16px",color:"var(--light-primary-color)"}})}):c||r?Object(M.jsx)(M.Fragment,{}):s.map((function(e){return Object(M.jsx)(ot.a,{headStyle:{fontSize:24,fontWeight:"bold",color:"var(--light-primary-color)",marginBottom:-4},bodyStyle:{display:"flex",justifyContent:"space-between",padding:"0 12px"},size:"small",title:e.stockticket,extra:Object(M.jsxs)(Qe.b,{size:0,direction:"vertical",align:"center",children:[Object(M.jsx)(ut,{children:"Compra"}),Object(M.jsx)(dt,{children:e.compra})]}),style:{background:"#f3f3f3",width:156,marginTop:8},children:Object(M.jsxs)(Qe.b,{align:"center",size:15,children:[Object(M.jsxs)(Qe.b,{size:0,direction:"vertical",align:"center",children:[Object(M.jsx)(ut,{children:"Neutro"}),Object(M.jsx)(dt,{children:e.neutro})]}),Object(M.jsxs)(Qe.b,{size:0,direction:"vertical",align:"center",children:[Object(M.jsx)(ut,{children:"Venda"}),Object(M.jsx)(dt,{children:e.venda})]}),Object(M.jsxs)(Qe.b,{size:0,direction:"vertical",align:"center",children:[Object(M.jsx)(ut,{children:"Revisao"}),Object(M.jsx)(dt,{children:e.revisao})]})]})},e.stockticket)}))]})}n(146);var bt=n(478);n(407);function pt(){return ht.apply(this,arguments)}function ht(){return(ht=Object(b.a)(h.a.mark((function e(){var t,n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.get("/research/");case 2:return t=e.sent,n=t.data,a=n.results.map((function(e){return{title:e.name,value:e.name,active:e.active}})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ft(){var e=ze(),t=e.research,n=e.setResearch,r=Object(a.useState)([]),c=Object(j.a)(r,2),i=c[0],o=c[1],s=Object(Ce.useQuery)(["list of researchs"],Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",pt());case 1:case"end":return e.stop()}}),e)}))),{staleTime:864e5,cacheTime:864e5,refetchOnWindowFocus:!1,refetchOnMount:!1}).data;return Object(a.useEffect)((function(){s&&o(s)}),[s]),Object(M.jsxs)("div",{children:[Object(M.jsx)("h1",{style:{color:"var(--light-primary-color)",fontSize:16},children:"Research"}),Object(M.jsx)(bt.a,{size:"large",allowClear:!0,placeholder:"Selecione um Research",treeCheckable:!0,showCheckedStrategy:bt.a.SHOW_CHILD,style:{width:"462px"},dropdownStyle:{maxHeight:"300px"},onChange:function(e){return n(e)},value:t,maxTagCount:8,maxTagPlaceholder:function(e){return"+ ".concat(e.length," ").concat(e.length>1?"Researchs":"Research"," ...")},treeData:[{title:t.length>0?Object(M.jsx)("span",{onClick:function(){return n([])},style:{display:"inline-block",color:"#286FBE",cursor:"pointer"},children:"Limpar"}):Object(M.jsx)("span",{onClick:function(){return function(e){var t=e.map((function(e){return e.value}));n(t)}(i)},style:{display:"inline-block",color:"#286FBE",cursor:"pointer"},children:"Selecionar todos"}),value:"xxx",disableCheckbox:!0,disabled:!0}].concat(Object(ke.a)(i))})]})}function mt(){return xt.apply(this,arguments)}function xt(){return(xt=Object(b.a)(h.a.mark((function e(){var t,n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.get("/sectors/");case 2:return t=e.sent,n=t.data,a=n.map((function(e){return{title:e.name,value:e.name,id:e.id}})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gt(){return Object(Ce.useQuery)(["list of sectors"],Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",mt());case 1:case"end":return e.stop()}}),e)}))),{staleTime:864e5,cacheTime:864e5,refetchOnWindowFocus:!1,refetchOnMount:!1})}n(408);function Ot(){var e=ze(),t=e.sector,n=e.setSector,r=Object(a.useState)([]),c=Object(j.a)(r,2),i=c[0],o=c[1],s=gt().data;return Object(a.useEffect)((function(){s&&o(s)}),[s]),Object(M.jsxs)("div",{children:[Object(M.jsx)("h1",{style:{color:"var(--light-primary-color)",fontSize:16},children:"Setores"}),Object(M.jsx)(bt.a,{size:"large",allowClear:!0,placeholder:"Selecione um Setor",treeCheckable:!0,showCheckedStrategy:bt.a.SHOW_CHILD,style:{width:"462px"},dropdownStyle:{maxHeight:"300px"},onChange:function(e){return function(e){var t,a=i.reduce((function(n,a){return e.includes(a.title)&&(t={title:a.title,value:a.value,id:a.id},n.push(t)),n}),[]);n(a)}(e)},value:t,maxTagCount:2,maxTagPlaceholder:function(e){return"+ ".concat(e.length," ").concat(e.length>1?"Setores":"Setor"," ...")},treeData:[{title:t.length>0?Object(M.jsx)("span",{onClick:function(){return n([])},style:{display:"inline-block",color:"#286FBE",cursor:"pointer"},children:"Limpar"}):Object(M.jsx)("span",{onClick:function(){return n(i)},style:{display:"inline-block",color:"#286FBE",cursor:"pointer"},children:"Selecionar todos"}),value:"xxx",disableCheckbox:!0,disabled:!0}].concat(Object(ke.a)(i))})]})}n(409);function vt(){var e=ze(),t=e.rating,n=e.setRating;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)("h1",{style:{color:"var(--light-primary-color)",fontSize:16},children:"Rating"}),Object(M.jsx)(bt.a,{size:"large",allowClear:!0,placeholder:"Selecione um Rating",treeCheckable:!0,showCheckedStrategy:bt.a.SHOW_CHILD,style:{width:"100%"},dropdownStyle:{maxHeight:"300px"},onChange:function(e){return n(e)},value:t,maxTagCount:2,maxTagPlaceholder:function(e){return"+ ".concat(e.length," ").concat(e.length>1?"Ratings":"Rating"," ...")},treeData:[{title:t.length>0?Object(M.jsx)("span",{onClick:function(){return n([])},style:{display:"inline-block",color:"#286FBE",cursor:"pointer"},children:"Limpar"}):Object(M.jsx)("span",{onClick:function(){return n(["Compra","Venda","Neutro","Revisao"])},style:{display:"inline-block",color:"#286FBE",cursor:"pointer"},children:"Selecionar todos"}),value:"xxx",disableCheckbox:!0,disabled:!0}].concat([{title:"Compra",value:"Compra"},{title:"Venda",value:"Venda"},{title:"Neutro",value:"Neutro"},{title:"Revis\xe3o",value:"Revisao"}])})]})}var yt=n(473),kt=(n(410),n(88)),wt=n.n(kt),St=(n(411),yt.a.RangePicker);function Ct(){var e=ze().onDateSelection;return Object(M.jsxs)("div",{children:[Object(M.jsx)("h1",{style:{color:"var(--light-primary-color)",fontSize:16},children:"Per\xedodo"}),Object(M.jsx)(St,{picker:"month",format:"DD/MM/YYYY",onChange:e,disabledDate:function(e){return function(e){return e>wt()().endOf("M")}(e)},showNow:!0,style:{width:"100%"},size:"large"})]})}var Nt=n(140),Tt=n(89);function Pt(){return Object(M.jsxs)(Qe.b,{align:"start",size:46,style:{margin:"32px auto",marginLeft:"5%"},children:[Object(M.jsxs)(Qe.b,{style:{margin:"0 auto"},size:"large",direction:"vertical",children:[Object(M.jsxs)(Qe.b,{style:{marginLeft:"32px"},size:"large",direction:"vertical",children:[Object(M.jsxs)(Nt.a,{gutter:86,children:[Object(M.jsx)(Tt.a,{span:13,children:Object(M.jsx)(ft,{})}),Object(M.jsx)(Tt.a,{span:11,children:Object(M.jsx)(Ct,{})})]}),Object(M.jsxs)(Nt.a,{gutter:86,children:[Object(M.jsx)(Tt.a,{span:13,children:Object(M.jsx)(Ot,{})}),Object(M.jsx)(Tt.a,{span:11,children:Object(M.jsx)(vt,{})})]})]}),Object(M.jsx)(nt,{})]}),Object(M.jsx)(jt,{})]})}n(412);function It(){return Object(M.jsxs)("div",{className:"container",children:[Object(M.jsx)(je,{}),Object(M.jsxs)(be.a,{style:{width:"100%",maxWidth:"100%"},children:[Object(M.jsx)(ge,{selectedKey:"1"}),Object(M.jsx)(be.a,{style:{background:"#ffffff"},children:Object(M.jsx)(Pt,{})})]})]})}var Rt=n(474),At=n(484);function _t(e){return Et.apply(this,arguments)}function Et(){return(Et=Object(b.a)(h.a.mark((function e(t){var n,a,r,c,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.get("/log/",{params:{page:t}});case 2:return n=e.sent,a=n.data,r=a.count,c=a.total_pages,i=a.results.map((function(e){return{status:e.status,userName:e.username,text:e.text,createdAt:new Intl.DateTimeFormat("pt-BR").format(new Date(e.createdat))}})),e.abrupt("return",{logList:i,totalPages:c,totalOfLogs:r});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ft(e){return Object(Ce.useQuery)(["list of Logs","page",e],Object(b.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_t(e));case 1:case"end":return t.stop()}}),t)}))),{staleTime:864e5,cacheTime:864e5,refetchOnWindowFocus:!1,refetchOnMount:!1})}var zt=n(93),Dt=n(134);function Lt(){var e=Object(a.useState)(1),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Ft(n),i=c.data,o=c.isLoading,s=c.isError;var l=null===i||void 0===i?void 0:i.totalPages,u=null===i||void 0===i?void 0:i.totalOfLogs,d=null===i||void 0===i?void 0:i.logList,b=Math.ceil(u/l),p=[{title:"Status",dataIndex:"status",align:"center",render:function(e,t){return t.status?Object(M.jsx)(zt.a,{style:{color:"red"}}):Object(M.jsx)(Dt.a,{style:{color:"green"}})}},{title:"Data de cria\xe7\xe3o",dataIndex:"createdAt",align:"center"},{title:Object(M.jsx)(Qe.b,{size:"middle",align:"center",style:{display:"flex",justifyContent:"flex-end",width:200},children:Object(M.jsx)(Qe.b,{size:0,direction:"vertical",align:"center",style:{marginRight:74},children:Object(M.jsx)("p",{style:{marginBottom:0},children:"Usu\xe1rio"})})}),dataIndex:"userName",align:"center",width:"30%",render:function(e,t){return Object(M.jsx)(Qe.b,{size:0,direction:"vertical",align:"center",children:Object(M.jsx)("p",{style:{marginBottom:0},children:t.userName})})}},{title:"Ocorr\xeancia",dataIndex:"text",align:"center",width:"40%",render:function(e,t){return void 0===t.text?"":t.text}}];return s?Object(M.jsxs)(Qe.b,{direction:"vertical",style:{marginTop:60,marginLeft:460},children:[Object(M.jsx)("p",{children:"Falha ao carregar os dados"}),Object(M.jsx)(et,{})]}):Object(M.jsx)(Ke.a,{style:{margin:48},columns:p,dataSource:d,loading:o,pagination:{current:n,onChange:function(e){r(e)},showSizeChanger:!1,pageSize:b,total:u}})}function Mt(){var e=H("csrftoken"),t=Rt.a.Dragger,n={xsrfHeaderName:"X-CSRFTOKEN",xsrfCookieName:"csrftoken",withCredentials:!0,mode:"same-origin",headers:{Authorization:"JWT ".concat(localStorage.getItem("access")),Accept:"application/json","Content-Type":"multipart/form-data","X-CSRFToken":e}},a={name:"file",accept:".csv",action:function(){var e=Object(b.a)(h.a.mark((function e(t){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(a=new FormData).append("recommendations",t),e.next=5,V.post("/recommendation-file/",a,n);case 5:return 200===(r=e.sent).status?ve.b.success("".concat(t.name," Upload feito com sucesso!")):ve.b.error("".concat(t.name," O upload do arquivo falhou.")),e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()};return Object(M.jsxs)(Qe.b,{direction:"vertical",align:"center",size:32,style:{margin:"32px auto"},children:[Object(M.jsxs)(t,Object(o.a)(Object(o.a)({style:{padding:80}},a),{},{children:[Object(M.jsx)("p",{className:"ant-upload-drag-icon",children:Object(M.jsx)(At.a,{})}),Object(M.jsx)("p",{className:"ant-upload-text",children:"Clique ou arraste um arquivo para est\xe1 \xe1rea para fazer o upload"}),Object(M.jsx)("p",{className:"ant-upload-hint",children:"Selecione apenas UM arquivo no formato .CSV"})]})),Object(M.jsx)(Lt,{})]})}n(413);function Bt(){return Object(M.jsxs)("div",{className:"container",children:[Object(M.jsx)(je,{}),Object(M.jsxs)(be.a,{style:{width:"100%",maxWidth:"100%"},children:[Object(M.jsx)(ge,{selectedKey:"3"}),Object(M.jsx)(be.a,{style:{background:"#ffffff"},children:Object(M.jsx)(Mt,{})})]})]})}function Wt(){return Object(M.jsx)(Qe.b,{align:"start",size:32,style:{margin:"32px auto"},children:"SETTINGS PAGE"})}n(414);function Ut(){return Object(M.jsxs)("div",{className:"container",children:[Object(M.jsx)(je,{}),Object(M.jsxs)(be.a,{style:{width:"100%",maxWidth:"100%"},children:[Object(M.jsx)(ge,{selectedKey:"3"}),Object(M.jsx)(be.a,{style:{background:"#ffffff"},children:Object(M.jsx)(Wt,{})})]})]})}n(415);function Vt(e){var t=e.setPage,n=e.setSector,r=e.sector,c=Object(a.useState)([]),i=Object(j.a)(c,2),o=i[0],s=i[1],l=gt().data;return Object(a.useEffect)((function(){l&&s(l)}),[l]),Object(M.jsxs)("div",{children:[Object(M.jsx)("h1",{style:{color:"var(--light-primary-color)",fontSize:16},children:"Setores"}),Object(M.jsx)(bt.a,{size:"large",allowClear:!0,placeholder:"Selecione um Setor",treeCheckable:!0,showCheckedStrategy:bt.a.SHOW_CHILD,style:{width:"462px"},dropdownStyle:{maxHeight:"300px"},onChange:function(e){return function(e){var a,r=o.reduce((function(t,n){return e.includes(n.title)&&(a={title:n.title,value:n.value,id:n.id},t.push(a)),t}),[]);t(1),n(r)}(e)},value:r,maxTagCount:2,maxTagPlaceholder:function(e){return"+ ".concat(e.length," ").concat(e.length>1?"Setores":"Setor"," ...")},treeData:[{title:r.length>0?Object(M.jsx)("span",{onClick:function(){return n([])},style:{display:"inline-block",color:"#286FBE",cursor:"pointer"},children:"Limpar"}):Object(M.jsx)("span",{onClick:function(){return n(o)},style:{display:"inline-block",color:"#286FBE",cursor:"pointer"},children:"Selecionar todos"}),value:"xxx",disableCheckbox:!0,disabled:!0}].concat(Object(ke.a)(o))})]})}n(416);var Ht=He.a.Search;function qt(e){var t=e.handleStockSearch,n=e.isButtonVisible,a=e.searchValue,r=e.setSearchValue;return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(Qe.b,{children:[Object(M.jsx)("h1",{style:{color:"var(--light-primary-color)",fontSize:16},children:"A\xe7\xe3o"}),Object(M.jsx)($e.a,{type:"link",style:{visibility:n?"visible":"hidden",marginBottom:8,marginTop:0,padding:0,height:25},onClick:function(){return t("")},children:"Limpar"})]}),Object(M.jsx)(Ht,{value:a,size:"large",placeholder:"Pesquise por uma A\xe7\xe3o",onSearch:function(e){return t(e)},onChange:function(e){return r(e.target.value)},enterButton:!0})]})}function Yt(e){return"sem dados"===e?"":Number(e)>0?"green":"red"}var Qt,Kt,Jt,Gt=n(485),Xt=n(486),Zt=(n(417),ee.a.p(Qt||(Qt=Object($.a)([" \n  margin: 0;\n  \n  &.green {\n    color: green\n  }  \n  &.red {\n    color: red\n  }\n"])))),$t=ee.a.span(Kt||(Kt=Object($.a)(["\n  font-size: 12px;\n  background:  ","; \n  color: #ffffff;\n  padding: 6px;\n  cursor: ","\n"])),(function(e){return e.disabled?"#909090":"var(--light-primary-color)"}),(function(e){return e.disabled?"not-allowed":"pointer"}));function en(e){var t=e.ticketData,n=e.stocksTableData,a=e.isLoading,r=e.isError,c=e.isRefeching,i=e.onRefeching,o=e.currentPage,l=e.onChangePage,u=e.totalStocks,d=e.handleRefetchStockTableData,j=ze().handlePrefetchRecommendations,b=Object(M.jsx)(Ye.a,{style:{color:"var(--light-primary-color)"}}),p=[{title:Object(M.jsxs)(Qe.b,{size:"middle",align:"center",style:{display:"flex",justifyContent:"flex-end",width:200},children:[Object(M.jsx)(Ge.a,{style:{fontSize:16},spin:c,onClick:function(){i(!0),d()}}),Object(M.jsxs)(Qe.b,{size:0,direction:"vertical",align:"center",style:{marginRight:74},children:[Object(M.jsx)("p",{style:{marginBottom:0},children:"Empresa"}),Object(M.jsx)("b",{children:"Ticket"})]})]}),dataIndex:"stockTicket",align:"center",width:"20%",render:function(e,t){return Object(M.jsxs)(Qe.b,{size:0,direction:"vertical",align:"center",children:[Object(M.jsx)("p",{style:{marginBottom:0},children:t.stockName}),Object(M.jsx)("b",{children:t.stockTicket})]})}},{title:"Setor",dataIndex:"sectorName",align:"center",width:"30%",render:function(e,t){return void 0===t.sectorName?"":t.sectorName}},{title:"Cota\xe7\xe3o",dataIndex:"actualPrice",align:"center",render:function(e,t){return void 0===t.actualPrice?b:"string"==typeof t.actualPrice?t.actualPrice:We(t.actualPrice)}},{title:"30 dias",dataIndex:"oneMouth",align:"center",render:function(e,t){return t.oneMouth?Object(M.jsxs)(Zt,{className:Yt(t.oneMouth),children:[t.oneMouth>0?Object(M.jsx)(Gt.a,{}):Object(M.jsx)(Xt.a,{})," "+Math.abs(t.oneMouth)+"%"]}):b}},{title:"6 meses",dataIndex:"sixMouths",align:"center",render:function(e,t){return t.sixMouths?Object(M.jsxs)(Zt,{className:Yt(t.sixMouths),children:[t.sixMouths>0?Object(M.jsx)(Gt.a,{}):Object(M.jsx)(Xt.a,{})," "+Math.abs(t.sixMouths)+"%"]}):b}},{title:"1 ano",dataIndex:"oneYear",align:"center",render:function(e,t){return t.oneYear?Object(M.jsxs)(Zt,{className:Yt(t.oneYear),children:[t.oneYear>0?Object(M.jsx)(Gt.a,{}):Object(M.jsx)(Xt.a,{})," "+Math.abs(t.oneYear)+"%"]}):b}},{title:"",dataIndex:"",key:"x",align:"center",render:function(e,t){var n=!t.actualPrice;return Object(M.jsx)(s.b,{to:t.actualPrice?"/stocks/".concat(t.stockTicket):"#",onMouseEnter:function(){return j(t.stockTicket)},children:Object(M.jsx)($t,{disabled:n,children:"Ver detalhes"})})}}];console.log(null===n||void 0===n?void 0:n.length);var h=void 0===n?null:void 0!==n.length?n.map((function(e){return t.every((function(e){return e.isSuccess}))?t.reduce((function(t,n){var a;return(null===(a=n.data)||void 0===a?void 0:a.stockTicket)===e.stockTicket?t={key:e.stockTicket,stockTicket:e.stockTicket,stockName:e.stockName,sectorName:e.sectorName,actualPrice:n.data.actualPrice,oneMouth:n.data.oneMouth,sixMouths:n.data.sixMouths,oneYear:n.data.oneYear}:t}),{}):{key:e.stockTicket,stockTicket:e.stockTicket,stockName:e.stockName,sectorName:e.sectorName}})):[{key:n.stockTicket,stockTicket:n.stockTicket,stockName:n.stockName,sectorName:n.sectorName,actualPrice:n.actualPrice,oneMouth:n.oneMouth,sixMouths:n.sixMouths,oneYear:n.oneYear}];return r?Object(M.jsxs)(Qe.b,{direction:"vertical",style:{marginTop:60,marginLeft:460},children:[Object(M.jsx)("p",{children:"Falha ao carregar os dados"}),Object(M.jsx)(et,{})]}):Object(M.jsx)(Ke.a,{columns:p,dataSource:h,loading:a,pagination:{current:o,onChange:l,showSizeChanger:!1,pageSize:5,total:u}})}function tn(e){return nn.apply(this,arguments)}function nn(){return(nn=Object(b.a)(h.a.mark((function e(t){var n,a,r,c,i,o,s,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.get("stocks/",{params:{page:t.page,sector:t.sectors,ticket:t.ticket}});case 2:if(n=e.sent,"object"!==typeof(a=n.data).results){e.next=14;break}console.log("entrei no if"),Jt=a.results.map((function(e){return{stockName:e.name,stockTicket:e.ticket,sectorName:e.sectorname,sectorId:e.sectorid}})),r=a.count,c=[],i=Object(Se.a)(a.results);try{for(i.s();!(o=i.n()).done;)s=o.value,c.includes(s.ticket)||c.push(s.ticket)}catch(u){i.e(u)}finally{i.f()}return e.abrupt("return",{totalOfStocks:r,ticketList:c,stocksData:Jt});case 14:return console.log("entrei no else"),Jt={stockName:a.name,stockTicket:a.ticket,sectorName:a.sectorname,actualPrice:0===a.actual_price?"sem dados":a.actual_price,oneYear:0==Number(a.growth1y)?"sem dados":a.growth1y,sixMouths:0==Number(a.growth6m)?"sem dados":a.growth6m,oneMouth:0==Number(a.growth30d)?"sem dados":a.growth30d},1,l=[a.ticket],e.abrupt("return",{totalOfStocks:1,ticketList:l,stocksData:Jt});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function an(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(1),i=Object(j.a)(c,2),o=i[0],s=i[1],l=Object(a.useState)([]),u=Object(j.a)(l,2),d=u[0],p=u[1],f=Object(a.useState)(!1),m=Object(j.a)(f,2),x=m[0],g=m[1],O=Object(a.useState)({}),v=Object(j.a)(O,2),y=v[0],k=v[1],w=Object(a.useState)(""),S=Object(j.a)(w,2),C=S[0],N=S[1],T=Object(a.useState)(!1),P=Object(j.a)(T,2),I=P[0],R=P[1],A=Object(a.useState)(""),_=Object(j.a)(A,2),E=_[0],F=_[1],z=function(e){return Object(Ce.useQuery)(["stocks",e],Object(b.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",tn(e));case 1:case"end":return t.stop()}}),t)}))),{staleTime:864e5,cacheTime:864e5,refetchOnWindowFocus:!1,refetchOnMount:!1})}(y),D=z.data,L=z.isLoading,B=z.isError;console.log(D);var W=null===D||void 0===D?void 0:D.ticketList,U=null===D||void 0===D?void 0:D.totalOfStocks,V=null===D||void 0===D?void 0:D.stocksData;function H(){return H=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t){e.next=7;break}return R(!1),F(""),s(1),r([]),N(""),e.abrupt("return");case 7:R(!0),s(1),r([]),N(t.toUpperCase());case 11:case"end":return e.stop()}}),e)}))),H.apply(this,arguments)}Object(a.useEffect)((function(){d!==W&&p(W);var e=n.map((function(e){return e.id}));k({page:o,sectors:e,ticket:C})}),[W,n,o,C]);var q=Ae(d||[]);function Y(){return(Y=Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e.refetchQueries({active:!0});case 2:g(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return console.log(q),Object(M.jsxs)(Qe.b,{style:{margin:"32px"},size:"large",direction:"vertical",children:[Object(M.jsxs)(Nt.a,{gutter:20,children:[Object(M.jsx)(Tt.a,{span:11,children:Object(M.jsx)(Vt,{setSector:r,sector:n,setPage:s})}),Object(M.jsx)(Tt.a,{span:8,children:Object(M.jsx)(qt,{handleStockSearch:function(e){return H.apply(this,arguments)},searchValue:E,isButtonVisible:I,setSearchValue:F})})]}),Object(M.jsx)(en,{ticketData:q,stocksTableData:V,isError:B,isLoading:L,isRefeching:x,onRefeching:g,currentPage:o,onChangePage:function(e){s(e)},totalStocks:U,handleRefetchStockTableData:function(){return Y.apply(this,arguments)}})]})}n(418);function rn(){return Object(M.jsxs)("div",{className:"container",children:[Object(M.jsx)(je,{}),Object(M.jsxs)(be.a,{style:{width:"100%",maxWidth:"100%"},children:[Object(M.jsx)(ge,{selectedKey:"2"}),Object(M.jsx)(be.a,{style:{background:"#ffffff"},children:Object(M.jsx)(an,{})})]})]})}n(419);var cn,on,sn,ln=ee.a.p(cn||(cn=Object($.a)([" \n  margin: 0;\n  \n  &.green {\n    color: green\n  }\n  &.red {\n    color: red\n  }\n"]))),un=(ee.a.span(on||(on=Object($.a)(["\n  font-size: 12px;\n  background: var(--light-primary-color);\n  color: #ffffff;\n  padding: 6px;\n  cursor: ",";\n"])),(function(e){return e.disabled?"not-allowed":"pointer"})),ee.a.p(sn||(sn=Object($.a)(["\n  text-transform: lowercase;\n  &::first-letter {\n    text-transform: capitalize\n  }\n  margin-bottom: 0px\n"])))),dn=["editing","dataIndex","title","inputType","record","index","children"];function jn(){var e=ze().ticketData,t=Object(a.useState)([]),n=Object(j.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)([]),s=Object(j.a)(i,2),u=s[0],d=s[1],p=Object(l.g)().ticket,f=Ue.a.useForm(),m=Object(j.a)(f,1)[0],x=Object(a.useState)(""),g=Object(j.a)(x,2),O=g[0],v=g[1],y=e.some((function(e){return!0===e.isFetching})),k=e.every((function(e){if(e.data)return!Array.isArray(e.data.research);return!0})),w=Object(M.jsx)(Ye.a,{style:{color:"var(--light-primary-color)"}}),S=_e.getQueryData(["recommendations for",p]),C=[_e.getQueryData(["ticket",p])];Object(a.useEffect)((function(){var e={},t=null===C||void 0===C?void 0:C.reduce((function(t,n){return n.stockTicket===p?(e={key:n.stockTicket,stockName:n.stockName,stockTicket:n.stockTicket,sectorName:n.sectorName,actualPrice:n.actualPrice,oneYear:n.oneYear,sixMouths:n.sixMouths,oneMouth:n.oneMouth},t.push(e),t):t}),[]);if(c(t),S.length>0){var n=null===S||void 0===S?void 0:S.reduce((function(e,t){return t.stockTicket===p?(e.push.apply(e,Object(ke.a)(t.research)),e):e}),[]);d(n)}else d([{dateFinal:"Sem recomenda\xe7\xf5es",initialPrice:"-",key:"-",potential:"-",rating:"-",researchId:"-",stockTicket:"-",targetPrice:"-"}])}),[]);var N=Object(Ce.useMutation)(function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.put("recommendation/".concat(t.recom.key,"/"),t.updatedRecommendation);case 2:return e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){return _e.invalidateQueries(["recommendations for",p])}}),T=function(){var e=Object(b.a)(h.a.mark((function e(t,n){var a,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("COMPRA"!==(a=t.rating.toUpperCase())&&"VENDA"!==a&&"NEUTRO"!==a){e.next=8;break}return d(n),r={datefinal:t.dateFinal.split("/").reverse().join("-"),rating:a,target:t.targetPrice},e.next=6,N.mutateAsync({updatedRecommendation:r,recom:t});case 6:e.next=9;break;case 8:ve.b.error("Os valores de rating s\xe3o: Compra, Venda ou Neutro");case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=[{title:Object(M.jsxs)(Qe.b,{size:"middle",align:"center",style:{display:"flex",justifyContent:"flex-end",width:200},children:[!k&&y&&Object(M.jsx)(Ye.a,{style:{color:"#ffffff"}}),Object(M.jsxs)(Qe.b,{size:0,direction:"vertical",align:"center",style:{marginRight:74},children:[Object(M.jsx)("p",{style:{marginBottom:0},children:"Empresa"}),Object(M.jsx)("b",{children:"Ticket"})]})]}),dataIndex:"ticket",align:"center",width:"20%",render:function(e,t){return Object(M.jsxs)(Qe.b,{size:0,direction:"vertical",align:"center",children:[Object(M.jsx)("p",{style:{marginBottom:0},children:t.stockName}),Object(M.jsx)("b",{children:t.stockTicket})]})}},{title:"Setor",dataIndex:"sectorName",align:"center",width:"30%"},{title:"Cota\xe7\xe3o",dataIndex:"actualPrice",align:"center",render:function(e,t){return void 0===t.actualPrice?w:"string"==typeof t.actualPrice?t.actualPrice:We(t.actualPrice)}},{title:"30 dias",dataIndex:"oneMouth",align:"center",render:function(e,t){return t.oneMouth?Object(M.jsxs)(ln,{className:Yt(t.oneMouth),children:[t.oneMouth>0?Object(M.jsx)(Gt.a,{}):Object(M.jsx)(Xt.a,{})," "+Math.abs(t.oneMouth)+"%"]}):w}},{title:"6 meses",dataIndex:"sixMouths",align:"center",render:function(e,t){return t.sixMouths?Object(M.jsxs)(ln,{className:Yt(t.sixMouths),children:[t.sixMouths>0?Object(M.jsx)(Gt.a,{}):Object(M.jsx)(Xt.a,{})," "+Math.abs(t.sixMouths)+"%"]}):w}},{title:"1 ano",dataIndex:"oneYear",align:"center",render:function(e,t){return t.oneYear?Object(M.jsxs)(ln,{className:Yt(t.oneYear),children:[t.oneYear>0?Object(M.jsx)(Gt.a,{}):Object(M.jsx)(Xt.a,{})," "+Math.abs(t.oneYear)+"%"]}):w}}],I=function(e){var t=e.editing,n=e.dataIndex,a=e.title,r=e.inputType,c=(e.record,e.index,e.children),i=Object(we.a)(e,dn),s="number"===r?Object(M.jsx)(Ve.a,{}):Object(M.jsx)(He.a,{});return Object(M.jsx)("td",Object(o.a)(Object(o.a)({},i),{},{children:t?Object(M.jsx)(Ue.a.Item,{name:n,style:{margin:0},rules:[{required:!0,message:"Por favor preencha ".concat(a,"!")}],children:s}):c}))},R=function(){var e=function(e){return e.key===O},t=function(){var e=Object(b.a)(h.a.mark((function e(t){var n,a,r,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.validateFields();case 3:n=e.sent,a=Object(ke.a)(u),r=a.findIndex((function(e){return t===e.key})),r>-1?(c=a[r],a.splice(r,1,Object(o.a)(Object(o.a)({},c),n)),T(Object(o.a)(Object(o.a)({},c),n),a),v("")):(a.push(n),d(a),v("")),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),n=[{title:"Data",dataIndex:"dateFinal",width:"10%",align:"center",editable:!0},{title:"Research",dataIndex:"researchName",width:"4%",align:"center",editable:!1},{title:"Rating",dataIndex:"rating",width:"8%",align:"center",editable:!0,render:function(e,t){return Object(M.jsx)(un,{children:t.rating})}},{title:"Cota\xe7\xe3o",dataIndex:"initialPrice",width:"8%",align:"center",editable:!1,render:function(e,t){return void 0===t.initialPrice?w:"string"==typeof t.initialPrice?t.initialPrice:We(t.initialPrice)}},{title:"Pre\xe7o Alvo",dataIndex:"targetPrice",width:"8%",align:"center",editable:!0,render:function(e,t){return void 0===t.targetPrice?w:"string"==typeof t.targetPrice?t.targetPrice:We(t.targetPrice)}},{title:"Potential",dataIndex:"potential",width:"8%",align:"center",editable:!1,render:function(e,t){return void 0===t.potential?w:"string"==typeof t.potential?t.potential:t.potential+"%"}},{title:"",dataIndex:"operation",align:"center",width:"10%",render:function(n,a){var r=e(a);return a.researchName?r?Object(M.jsxs)("span",{children:[Object(M.jsx)("button",{onClick:function(){return t(a.key)},style:{width:66,height:30,cursor:"pointer",background:"#1890ff",border:"none",color:"#ffffff",marginRight:8,borderRadius:2},children:"Salvar"}),Object(M.jsx)("button",{onClick:function(){v("")},style:{width:68,height:30,border:"none",cursor:"pointer",borderRadius:2,color:"#ffffff",background:"#F56565"},children:"Cancelar"})]}):Object(M.jsx)(qe.a.Link,{disabled:""!==O,onClick:function(){return function(e){m.setFieldsValue(Object(o.a)({dateFinal:"",rating:"",targetPrice:""},e)),v(e.key)}(a)},children:"Editar"}):""}}].map((function(t){return t.editable?Object(o.a)(Object(o.a)({},t),{},{onCell:function(n){return{record:n,inputType:"rating"===t.dataIndex||"dateFinal"===t.dataIndex?"text":"number",dataIndex:t.dataIndex,title:t.title,editing:e(n)}}}):t}));return Object(M.jsx)(Ue.a,{form:m,component:!1,children:Object(M.jsx)(Ke.a,{components:{body:{cell:I}},bordered:!0,dataSource:u,columns:n,rowClassName:"editable-row",pagination:{hideOnSinglePage:!0}})})};return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(Ke.a,{loading:!1,columns:P,dataSource:r,pagination:{hideOnSinglePage:!0}}),Object(M.jsx)(R,{})]})}Ye.a.setDefaultIndicator(Object(M.jsx)(Je.a,{style:{fontSize:24},spin:!0}));n(420);var bn=n(219);function pn(e){return hn.apply(this,arguments)}function hn(){return(hn=Object(b.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.get("chart-1/?ticket=".concat(t));case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fn(e){return mn.apply(this,arguments)}function mn(){return(mn=Object(b.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.get("chart-2/?ticket=".concat(t));case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xn(){var e=Object(l.g)().ticket,t=Object(a.useState)({}),n=Object(j.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)({}),o=Object(j.a)(i,2),s=o[0],u=o[1],d=function(e){return Object(Ce.useQuery)(["chart1",e],Object(b.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",pn(e));case 1:case"end":return t.stop()}}),t)}))),{staleTime:864e5,cacheTime:864e5,refetchOnWindowFocus:!1,refetchOnMount:!1})}(e),p=d.data,f=d.isSuccess,m=d.isLoading,x=function(e){return Object(Ce.useQuery)(["chart2",e],Object(b.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fn(e));case 1:case"end":return t.stop()}}),t)}))),{staleTime:864e5,cacheTime:864e5,refetchOnWindowFocus:!1,refetchOnMount:!1})}(e),g=x.data,O=x.isSuccess,v=x.isLoading;function y(e){return k.apply(this,arguments)}function k(){return(k=Object(b.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:_e.invalidateQueries([n,e]);case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}Object(a.useEffect)((function(){if(p){var t=p.map((function(e){return e.Date})),n=p.map((function(e){return e.Close})),a=p.map((function(e){return e[1]})),r=p.map((function(e){return e[2]})),i=p.map((function(e){return e[3]})),o=p.map((function(e){return e[4]})),s=p.map((function(e){return e[5]})),l=p.map((function(e){return e[6]}));c({labels:t,datasets:[{label:e,data:n,fill:!1,backgroundColor:"rgb(255, 99, 132)",borderColor:"rgba(255, 99, 132, 0.2)",yAxisID:"y-axis-1"},{label:"1",data:a,fill:!1,backgroundColor:"rgb(194, 37, 220)",borderColor:"rgba(194, 37, 220, 0.2)",yAxisID:"y-axis-2"},{label:"2",data:r,fill:!1,backgroundColor:"rgb(37, 220, 77)",borderColor:"rgba(37, 220, 77, 0.2)",yAxisID:"y-axis-2"},{label:"3",data:i,fill:!1,backgroundColor:"rgb(165, 208, 95)",borderColor:"rgba(165, 208, 95, 0.2)",yAxisID:"y-axis-2"},{label:"4",data:o,fill:!1,backgroundColor:"#6D3B9E",borderColor:"rgba(73, 138, 202, 0.2)",yAxisID:"y-axis-2"},{label:"5",data:s,fill:!1,backgroundColor:"rgb(204, 0, 159)",borderColor:"rgba(204, 0, 159, 0.2)",yAxisID:"y-axis-2"},{label:"6",data:l,fill:!1,backgroundColor:"rgb(54, 162, 235)",borderColor:"rgba(54, 162, 235, 0.2)",yAxisID:"y-axis-2"}]})}}),[p]),Object(a.useEffect)((function(){if(g){var t=g.map((function(e){return e.Date})),n=g.map((function(e){return e.Close})),a=g.map((function(e){return e.Media}));u({labels:t,datasets:[{label:e,data:n,fill:!1,backgroundColor:"rgb(255, 99, 132)",borderColor:"rgba(255, 99, 132, 0.2)",yAxisID:"y-axis-1"},{label:"Media recomenda\xe7\xf5es",data:a,fill:!1,backgroundColor:"rgb(194, 37, 220)",borderColor:"rgba(194, 37, 220, 0.2)",yAxisID:"y-axis-2"}]})}}),[g]);var w={scales:{yAxes:[{type:"linear",display:!0,position:"left",id:"y-axis-1"},{type:"linear",display:!0,position:"right",id:"y-axis-2",gridLines:{drawOnArea:!1}}]}};return Object(M.jsxs)("div",{className:"container",children:[Object(M.jsx)(je,{}),Object(M.jsxs)(be.a,{style:{width:"100%",maxWidth:"100%"},children:[Object(M.jsx)(ge,{selectedKey:"2"}),Object(M.jsx)(be.a,{style:{background:"#ffffff"},children:Object(M.jsxs)(Qe.b,{style:{margin:"32px"},size:64,direction:"vertical",children:[Object(M.jsx)(jn,{}),r.labels?Object(M.jsx)(bn.a,{data:r,options:w}):m||f?Object(M.jsxs)(Qe.b,{align:"center",size:"small",style:{marginLeft:384},children:[Object(M.jsx)("p",{style:{marginBottom:0},children:"Carregando gr\xe1fico..."})," ",Object(M.jsx)(Ye.a,{})," "]}):Object(M.jsxs)("p",{style:{marginLeft:300},children:["Falha ao carregar os gr\xe1ficos!",Object(M.jsx)($e.a,{type:"link",onClick:function(){return y("chart1")},children:"Tentar novamente"})]}),s.labels?Object(M.jsx)(bn.a,{data:s,options:w}):v||O?Object(M.jsxs)(Qe.b,{align:"center",size:"small",style:{marginLeft:384},children:[Object(M.jsx)("p",{style:{marginBottom:0},children:"Carregando gr\xe1fico..."})," ",Object(M.jsx)(Ye.a,{})," "]}):Object(M.jsxs)("p",{style:{marginLeft:300},children:["Falha ao carregar os gr\xe1ficos! ",Object(M.jsx)($e.a,{type:"link",onClick:function(){return y("chart2")},children:"Tentar novamente"})]})]})})]})]})}var gn=Object(u.b)(null,{verify:function(e,t){return function(){var n=Object(b.a)(h.a.mark((function n(a){var r,c;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={headers:{"Content-Type":"application/json"}},c=JSON.stringify({uid:e,token:t}),n.prev=2,n.next=5,m.a.post("".concat("https://consense-djangoapi.herokuapp.com","/auth/users/activation/"),c,r);case 5:a({type:y}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),a({type:k});case 11:case"end":return n.stop()}}),n,null,[[2,8]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.verify,n=e.match,r=Object(a.useState)(!1),c=Object(j.a)(r,2),i=c[0],o=c[1];return i?Object(M.jsx)(l.a,{to:"/"}):Object(M.jsx)("div",{className:"container",children:Object(M.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center",style:{marginTop:"200px"},children:[Object(M.jsx)("h1",{children:"Verifique sua conta"}),Object(M.jsx)("button",{onClick:function(e){var a=n.params.uid,r=n.params.token;t(a,r),o(!0)},style:{marginTop:"50px"},type:"button",className:"btn btn-primary",children:"Verificar Conta"}),Object(M.jsxs)("div",{style:{display:"flex",alignItems:"baseline",marginTop:"20px"},children:[Object(M.jsx)("input",{type:"checkbox"}),Object(M.jsx)("p",{children:" Estou de acordo e aceito os termos"})]})]})})})),On=(n(421),Object(u.b)(null,{reset_password:function(e){return function(){var t=Object(b.a)(h.a.mark((function t(n){var a,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{"Content-Type":"application/json"}},r=JSON.stringify({email:e}),t.prev=2,t.next=5,m.a.post("".concat("https://consense-djangoapi.herokuapp.com","/auth/users/reset_password/"),r,a);case 5:n({type:P}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),n({type:T});case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}()}})((function(e){var t=e.reset_password,n=Object(a.useState)(!1),r=Object(j.a)(n,2),c=r[0],i=r[1],u=Object(a.useState)({email:""}),b=Object(j.a)(u,2),p=b[0],h=b[1],f=p.email;return c?Object(M.jsx)(l.a,{to:"/"}):Object(M.jsxs)("div",{style:{minWidth:290,paddingTop:"5%",maxWidth:"230px",marginRight:"auto",marginLeft:"auto",minHeight:"400px"},className:"container",children:[Object(M.jsx)(F.a,{variant:"outlined",children:Object(M.jsxs)(W,{styles:"big-container",children:[Object(M.jsx)(U,{styles:"logo"}),Object(M.jsxs)("div",{children:[Object(M.jsx)("h3",{style:{textAlign:"center",marginBottom:"0px"},children:"Problemas para entrar?"}),Object(M.jsx)("p",{style:{textAlign:"center",marginBottom:"30px",fontSize:"12px"},children:"Insira o seu email e enviaremos um link para voc\xea voltar a acessar a sua conta."}),Object(M.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),t(f),i(!0)}(e)},children:[Object(M.jsx)("div",{className:"form-group",children:Object(M.jsx)(z.a,{id:"outlined-basic",variant:"outlined",label:"E-mail",size:"small",className:"form-control",type:"email",placeholder:"Email",name:"email",value:f,onChange:function(e){return function(e){return h(Object(o.a)(Object(o.a)({},p),{},Object(d.a)({},e.target.name,e.target.value)))}(e)},required:!0})}),Object(M.jsxs)(D.a,{className:"card-action",children:[Object(M.jsx)(B,{className:"btn-reset",type:"submit",children:"Enviar link para login"}),Object(M.jsx)(G,{})]})]})]})]})}),Object(M.jsx)(F.a,{style:{marginTop:20,textAlign:"center"},variant:"outlined",children:Object(M.jsx)(W,{styles:"big-container",children:Object(M.jsx)(s.b,{to:"/",children:" Conecte-se"})})})]})}))),vn=Object(u.b)(null,{reset_password_confirm:function(e,t,n,a){return function(){var r=Object(b.a)(h.a.mark((function r(c){var i,o;return h.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i={headers:{"Content-Type":"application/json"}},o=JSON.stringify({uid:e,token:t,new_password:n,re_new_password:a}),r.prev=2,r.next=5,m.a.post("".concat("https://consense-djangoapi.herokuapp.com","/auth/users/reset_password_confirm/"),o,i);case 5:c({type:R}),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(2),c({type:I});case 11:case"end":return r.stop()}}),r,null,[[2,8]])})));return function(e){return r.apply(this,arguments)}}()}})((function(e){var t=e.match,n=e.reset_password_confirm,r=Object(a.useState)(!1),c=Object(j.a)(r,2),i=c[0],s=c[1],u=Object(a.useState)({new_password:"",re_new_password:""}),b=Object(j.a)(u,2),p=b[0],h=b[1],f=p.new_password,m=p.re_new_password,x=function(e){return h(Object(o.a)(Object(o.a)({},p),{},Object(d.a)({},e.target.name,e.target.value)))};return i?Object(M.jsx)(l.a,{to:"/"}):Object(M.jsx)("div",{className:"container mt-5",style:{minHeight:"400px"},children:Object(M.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault();var a=t.params.uid,r=t.params.token;n(a,r,f,m),s(!0)}(e)},children:[Object(M.jsx)("div",{className:"form-group",children:Object(M.jsx)("input",{className:"form-control",type:"password",placeholder:"New Password",name:"new_password",value:f,onChange:function(e){return x(e)},minLength:"6",required:!0})}),Object(M.jsx)("div",{className:"form-group",children:Object(M.jsx)("input",{className:"form-control",type:"password",placeholder:"Confirm New Password",name:"re_new_password",value:m,onChange:function(e){return x(e)},minLength:"6",required:!0})}),Object(M.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Reset Password"})]})})})),yn=n(128),kn=n(263),wn=n(265),Sn=n(264),Cn=n.n(Sn),Nn={access:localStorage.getItem("access"),refresh:localStorage.getItem("refresh"),isAuthenticated:null,user:null};var Tn=Object(yn.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case C:case x:return Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:!0});case O:return Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:!1});case w:return Object(o.a)(Object(o.a)({},e),{},{user:a});case N:return Object(o.a)(Object(o.a)({},e),{},{isAuthenticated:!1});case S:return Object(o.a)(Object(o.a)({},e),{},{user:null});case g:case v:case A:return localStorage.removeItem("access"),localStorage.removeItem("refresh"),Cn.a.remove("csrftoken"),localStorage.removeItem("csrftoken"),Object(o.a)(Object(o.a)({},e),{},{access:null,refresh:null,isAuthenticated:!1,user:null});case P:case T:case R:case I:case y:case k:return Object(o.a)({},e);default:return e}}}),Pn=[wn.a],In=Object(yn.createStore)(Tn,{},Object(kn.composeWithDevTools)(yn.applyMiddleware.apply(void 0,Pn))),Rn=(n(422),Object(u.b)(null,{checkAuthenticated:function(){return function(){var e=Object(b.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("access")){e.next=22;break}return n={headers:{"Content-Type":"application/json",Accept:"application/json"}},a=JSON.stringify({token:localStorage.getItem("access")}),e.prev=3,e.next=6,m.a.post("".concat("https://consense-djangoapi.herokuapp.com","/auth/jwt/verify/"),a,n);case 6:if("token_not_valid"===e.sent.data.code){e.next=12;break}return t({type:C}),e.abrupt("return",!0);case 12:case 22:return t({type:N}),e.abrupt("return",!1);case 14:e.next=20;break;case 16:return e.prev=16,e.t0=e.catch(3),t({type:N}),e.abrupt("return",!1);case 20:e.next=24;break;case 24:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}()},load_user:E})((function(e){var t=e.checkAuthenticated,n=e.load_user,r=e.children;Object(a.useEffect)((function(){t(),n()}),[]);var c=Object(a.useState)(""),i=Object(j.a)(c,2),o=(i[0],i[1],Object(a.useState)({id:null,name:"",font:"",active:!0})),s=Object(j.a)(o,2);s[0],s[1];return Object(M.jsx)("div",{children:r})})));function An(){var e=Object(a.useState)(1),t=Object(j.a)(e,2),n=t[0],r=t[1],c=Ft(n),i=c.data,o=c.isLoading,s=c.isError;var l=null===i||void 0===i?void 0:i.totalPages,u=null===i||void 0===i?void 0:i.totalOfLogs,d=null===i||void 0===i?void 0:i.logList,b=Math.ceil(u/l),p=(Ye.a,[{title:"Data de cria\xe7\xe3o",dataIndex:"createdAt",align:"center"},{title:Object(M.jsx)(Qe.b,{size:"middle",align:"center",style:{display:"flex",justifyContent:"flex-end",width:200},children:Object(M.jsx)(Qe.b,{size:0,direction:"vertical",align:"center",style:{marginRight:74},children:Object(M.jsx)("p",{style:{marginBottom:0},children:"Usu\xe1rio"})})}),dataIndex:"userName",align:"center",width:"40%",render:function(e,t){return Object(M.jsx)(Qe.b,{size:0,direction:"vertical",align:"center",children:Object(M.jsx)("p",{style:{marginBottom:0},children:t.userName})})}},{title:"Ocorr\xeancia",dataIndex:"text",align:"center",width:"40%",render:function(e,t){return void 0===t.text?"":t.text}}]);return s?Object(M.jsxs)(Qe.b,{direction:"vertical",style:{marginTop:60,marginLeft:460},children:[Object(M.jsx)("p",{children:"Falha ao carregar os dados"}),Object(M.jsx)(et,{})]}):Object(M.jsx)(Ke.a,{style:{margin:48},columns:p,dataSource:d,loading:o,pagination:{current:n,onChange:function(e){r(e)},showSizeChanger:!1,pageSize:b,total:u}})}n(423);function _n(){return Object(M.jsxs)("div",{className:"container",children:[Object(M.jsx)(je,{}),Object(M.jsxs)(be.a,{style:{width:"100%",maxWidth:"100%"},children:[Object(M.jsx)(ge,{selectedKey:"3"}),Object(M.jsx)(be.a,{style:{background:"#ffffff"},children:Object(M.jsx)(An,{})})]})]})}n.p;var En=function(){window.location.assign("/")},Fn=["component"];function zn(e){var t=e.component,n=Object(we.a)(e,Fn);return Object(M.jsx)(l.b,Object(o.a)(Object(o.a)({},n),{},{render:function(e){if(1==_())return Object(M.jsx)(t,Object(o.a)({},e));window.location.assign("/")}}))}var Dn=function(){return Object(M.jsx)(u.a,{store:In,children:Object(M.jsx)(Rn,{children:Object(M.jsxs)(l.d,{children:[Object(M.jsx)(zn,{exact:!0,path:"/signup",component:ye}),Object(M.jsx)(zn,{exact:!0,path:"/logs",component:_n}),Object(M.jsx)(zn,{exact:!0,path:"/recommendations",component:It}),Object(M.jsx)(zn,{exact:!0,path:"/settings",component:Ut}),Object(M.jsx)(zn,{exact:!0,path:"/import-export-files",component:Bt}),Object(M.jsx)(zn,{exact:!0,path:"/stocks",component:rn}),Object(M.jsx)(zn,{path:"/stocks/:ticket",component:xn}),Object(M.jsx)(l.b,{exact:!0,path:"/",component:Z}),Object(M.jsx)(l.b,{exact:!0,path:"/reset-password",component:On}),Object(M.jsx)(l.b,{exact:!0,path:"/password/reset/confirm/:uid/:token",component:vn}),Object(M.jsx)(l.b,{exact:!0,path:"/activate/:uid/:token",component:gn}),Object(M.jsx)(l.b,{component:En})]})})})},Ln=function(e){return Object(M.jsx)(s.a,Object(o.a)(Object(o.a)({},e),{},{children:Object(M.jsx)(Dn,{})}))},Mn=n(266),Bn=n(24),Wn=n(267),Un=n.n(Wn);i.a.render(Object(M.jsx)(r.a.StrictMode,{children:Object(M.jsxs)(Ce.QueryClientProvider,{client:_e,children:[Object(M.jsx)(Bn.a,{locale:Un.a,children:Object(M.jsx)(Fe,{children:Object(M.jsx)(Ln,{})})}),Object(M.jsx)(Mn.ReactQueryDevtools,{})]})}),document.getElementById("root"))}},[[428,1,2]]]);
//# sourceMappingURL=main.d0ec6787.chunk.js.map